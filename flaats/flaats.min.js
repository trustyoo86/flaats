!function t(e,o,i){function n(a,s){if(!o[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=o[a]={exports:{}};e[a][0].call(h.exports,function(t){var o=e[a][1][t];return n(o||t)},h,h.exports,t,e,o,i)}return o[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(t,e,o){"use strict";!function(t,e){function i(t){return""===a?t:(t=t.charAt(0).toUpperCase()+t.substr(1),a+t)}var n=Math,r=e.createElement("div").style,a=function(){for(var t="t,webkitT,MozT,msT,OT".split(","),e=0,o=t.length;e<o;e++)if(t[e]+"ransform"in r)return t[e].substr(0,t[e].length-1);return!1}(),s=a?"-"+a.toLowerCase()+"-":"",l=i("transform"),c=i("transitionProperty"),h=i("transitionDuration"),u=i("transformOrigin"),p=i("transitionTimingFunction"),d=i("transitionDelay"),f=/android/gi.test(navigator.appVersion),b=/iphone|ipad/gi.test(navigator.appVersion),g=/hp-tablet/gi.test(navigator.appVersion),m=i("perspective")in r,y="ontouchstart"in t&&!g,v=!1!==a,w=i("transition")in r,x="onorientationchange"in t?"orientationchange":"resize",_=y?"touchstart":"mousedown",S=y?"touchmove":"mousemove",T=y?"touchend":"mouseup",k=y?"touchcancel":"mouseup",P=function(){return!1!==a&&{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[a]}(),z=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){return setTimeout(t,1)}}(),O=function(){return t.cancelRequestAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||clearTimeout}(),M=m?" translateZ(0)":"",E=function(o,i){var n,r=this;r.wrapper="object"==typeof o?o:e.getElementById(o),r.wrapper.style.overflow="hidden",r.scroller=r.wrapper.children[0],r.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:f,hideScrollbar:b,fadeScrollbar:b&&m,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(t){t.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(n in i)r.options[n]=i[n];r.x=r.options.x,r.y=r.options.y,r.options.useTransform=v&&r.options.useTransform,r.options.hScrollbar=r.options.hScroll&&r.options.hScrollbar,r.options.vScrollbar=r.options.vScroll&&r.options.vScrollbar,r.options.zoom=r.options.useTransform&&r.options.zoom,r.options.useTransition=w&&r.options.useTransition,r.options.zoom&&f&&(M=""),r.scroller.style[c]=r.options.useTransform?s+"transform":"top left",r.scroller.style[h]="0",r.scroller.style[u]="0 0",r.options.useTransition&&(r.scroller.style[p]="cubic-bezier(0.33,0.66,0.66,1)"),r.options.useTransform?r.scroller.style[l]="translate("+r.x+"px,"+r.y+"px)"+M:r.scroller.style.cssText+=";position:absolute;top:"+r.y+"px;left:"+r.x+"px",r.options.useTransition&&(r.options.fixedScrollbar=!0),r.refresh(),r._bind(x,t),r._bind(_),y||"none"!=r.options.wheelAction&&(r._bind("DOMMouseScroll"),r._bind("mousewheel")),r.options.checkDOMChanges&&(r.checkDOMTime=setInterval(function(){r._checkDOMChanges()},500))};E.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(t){var e=this;switch(t.type){case _:if(!y&&0!==t.button)return;e._start(t);break;case S:e._move(t);break;case T:case k:e._end(t);break;case x:e._resize();break;case"DOMMouseScroll":case"mousewheel":e._wheel(t);break;case P:e._transitionEnd(t)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(t){var o,i=this;if(!i[t+"Scrollbar"])return void(i[t+"ScrollbarWrapper"]&&(v&&(i[t+"ScrollbarIndicator"].style[l]=""),i[t+"ScrollbarWrapper"].parentNode.removeChild(i[t+"ScrollbarWrapper"]),i[t+"ScrollbarWrapper"]=null,i[t+"ScrollbarIndicator"]=null));i[t+"ScrollbarWrapper"]||(o=e.createElement("div"),i.options.scrollbarClass?o.className=i.options.scrollbarClass+t.toUpperCase():o.style.cssText="position:absolute;"+("h"==t?"height:7px;bottom:1px;left:2px;right:"+(i.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(i.hScrollbar?"7":"2")+"px;top:2px;right:1px"),o.style.cssText+=";pointer-events:none;"+s+"transition-property:opacity;"+s+"transition-duration:"+(i.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(i.options.hideScrollbar?"0":"1"),i.wrapper.appendChild(o),i[t+"ScrollbarWrapper"]=o,o=e.createElement("div"),i.options.scrollbarClass||(o.style.cssText="position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+s+"background-clip:padding-box;"+s+"box-sizing:border-box;"+("h"==t?"height:100%":"width:100%")+";"+s+"border-radius:3px;border-radius:3px"),o.style.cssText+=";pointer-events:none;"+s+"transition-property:"+s+"transform;"+s+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+s+"transition-duration:0;"+s+"transform: translate(0,0)"+M,i.options.useTransition&&(o.style.cssText+=";"+s+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),i[t+"ScrollbarWrapper"].appendChild(o),i[t+"ScrollbarIndicator"]=o),"h"==t?(i.hScrollbarSize=i.hScrollbarWrapper.clientWidth,i.hScrollbarIndicatorSize=n.max(n.round(i.hScrollbarSize*i.hScrollbarSize/i.scrollerW),8),i.hScrollbarIndicator.style.width=i.hScrollbarIndicatorSize+"px",i.hScrollbarMaxScroll=i.hScrollbarSize-i.hScrollbarIndicatorSize,i.hScrollbarProp=i.hScrollbarMaxScroll/i.maxScrollX):(i.vScrollbarSize=i.vScrollbarWrapper.clientHeight,i.vScrollbarIndicatorSize=n.max(n.round(i.vScrollbarSize*i.vScrollbarSize/i.scrollerH),8),i.vScrollbarIndicator.style.height=i.vScrollbarIndicatorSize+"px",i.vScrollbarMaxScroll=i.vScrollbarSize-i.vScrollbarIndicatorSize,i.vScrollbarProp=i.vScrollbarMaxScroll/i.maxScrollY),i._scrollbarPos(t,!0)},_resize:function(){var t=this;setTimeout(function(){t.refresh()},f?200:0)},_pos:function(t,e){this.zoomed||(t=this.hScroll?t:0,e=this.vScroll?e:0,this.options.useTransform?this.scroller.style[l]="translate("+t+"px,"+e+"px) scale("+this.scale+")"+M:(t=n.round(t),e=n.round(e),this.scroller.style.left=t+"px",this.scroller.style.top=e+"px"),this.x=t,this.y=e,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(t,e){var o,i=this,r="h"==t?i.x:i.y;i[t+"Scrollbar"]&&(r=i[t+"ScrollbarProp"]*r,r<0?(i.options.fixedScrollbar||(o=i[t+"ScrollbarIndicatorSize"]+n.round(3*r),o<8&&(o=8),i[t+"ScrollbarIndicator"].style["h"==t?"width":"height"]=o+"px"),r=0):r>i[t+"ScrollbarMaxScroll"]&&(i.options.fixedScrollbar?r=i[t+"ScrollbarMaxScroll"]:(o=i[t+"ScrollbarIndicatorSize"]-n.round(3*(r-i[t+"ScrollbarMaxScroll"])),o<8&&(o=8),i[t+"ScrollbarIndicator"].style["h"==t?"width":"height"]=o+"px",r=i[t+"ScrollbarMaxScroll"]+(i[t+"ScrollbarIndicatorSize"]-o))),i[t+"ScrollbarWrapper"].style[d]="0",i[t+"ScrollbarWrapper"].style.opacity=e&&i.options.hideScrollbar?"0":"1",i[t+"ScrollbarIndicator"].style[l]="translate("+("h"==t?r+"px,0)":"0,"+r+"px)")+M)},_start:function(e){var o,i,r,a,s,c=this,h=y?e.touches[0]:e;c.enabled&&!c.animating&&(c.options.onBeforeScrollStart&&c.options.onBeforeScrollStart.call(c,e),(c.options.useTransition||c.options.zoom)&&c._transitionTime(0),c.moved=!1,c.animating=!1,c.zoomed=!1,c.distX=0,c.distY=0,c.absDistX=0,c.absDistY=0,c.dirX=0,c.dirY=0,c.options.zoom&&y&&e.touches.length>1&&(a=n.abs(e.touches[0].pageX-e.touches[1].pageX),s=n.abs(e.touches[0].pageY-e.touches[1].pageY),c.touchesDistStart=n.sqrt(a*a+s*s),c.originX=n.abs(e.touches[0].pageX+e.touches[1].pageX-2*c.wrapperOffsetLeft)/2-c.x,c.originY=n.abs(e.touches[0].pageY+e.touches[1].pageY-2*c.wrapperOffsetTop)/2-c.y,c.options.onZoomStart&&c.options.onZoomStart.call(c,e)),c.options.momentum&&(c.options.useTransform?(o=getComputedStyle(c.scroller,null)[l].replace(/[^0-9\-.,]/g,"").split(","),i=+(o[12]||o[4]),r=+(o[13]||o[5])):(i=+getComputedStyle(c.scroller,null).left.replace(/[^0-9-]/g,""),r=+getComputedStyle(c.scroller,null).top.replace(/[^0-9-]/g,"")),i==c.x&&r==c.y||(c.options.useTransition?c._unbind(P):O(c.aniTime),c.steps=[],c._pos(i,r),c.options.onScrollEnd&&c.options.onScrollEnd.call(c))),c.absStartX=c.x,c.absStartY=c.y,c.startX=c.x,c.startY=c.y,c.pointX=h.pageX,c.pointY=h.pageY,c.startTime=e.timeStamp||Date.now(),c.options.onScrollStart&&c.options.onScrollStart.call(c,e),c._bind(S,t),c._bind(T,t),c._bind(k,t))},_move:function(t){var e,o,i,r=this,a=y?t.touches[0]:t,s=a.pageX-r.pointX,c=a.pageY-r.pointY,h=r.x+s,u=r.y+c,p=t.timeStamp||Date.now();if(r.options.onBeforeScrollMove&&r.options.onBeforeScrollMove.call(r,t),r.options.zoom&&y&&t.touches.length>1)return e=n.abs(t.touches[0].pageX-t.touches[1].pageX),o=n.abs(t.touches[0].pageY-t.touches[1].pageY),r.touchesDist=n.sqrt(e*e+o*o),r.zoomed=!0,i=1/r.touchesDistStart*r.touchesDist*this.scale,i<r.options.zoomMin?i=.5*r.options.zoomMin*Math.pow(2,i/r.options.zoomMin):i>r.options.zoomMax&&(i=2*r.options.zoomMax*Math.pow(.5,r.options.zoomMax/i)),r.lastScale=i/this.scale,h=this.originX-this.originX*r.lastScale+this.x,u=this.originY-this.originY*r.lastScale+this.y,this.scroller.style[l]="translate("+h+"px,"+u+"px) scale("+i+")"+M,void(r.options.onZoom&&r.options.onZoom.call(r,t));r.pointX=a.pageX,r.pointY=a.pageY,(h>0||h<r.maxScrollX)&&(h=r.options.bounce?r.x+s/2:h>=0||r.maxScrollX>=0?0:r.maxScrollX),(u>r.minScrollY||u<r.maxScrollY)&&(u=r.options.bounce?r.y+c/2:u>=r.minScrollY||r.maxScrollY>=0?r.minScrollY:r.maxScrollY),r.distX+=s,r.distY+=c,r.absDistX=n.abs(r.distX),r.absDistY=n.abs(r.distY),r.absDistX<6&&r.absDistY<6||(r.options.lockDirection&&(r.absDistX>r.absDistY+5?(u=r.y,c=0):r.absDistY>r.absDistX+5&&(h=r.x,s=0)),r.moved=!0,r._pos(h,u),r.dirX=s>0?-1:s<0?1:0,r.dirY=c>0?-1:c<0?1:0,p-r.startTime>300&&(r.startTime=p,r.startX=r.x,r.startY=r.y),r.options.onScrollMove&&r.options.onScrollMove.call(r,t))},_end:function(o){if(!y||0===o.touches.length){var i,r,a,s,c,u,p,d=this,f=y?o.changedTouches[0]:o,b={dist:0,time:0},g={dist:0,time:0},m=(o.timeStamp||Date.now())-d.startTime,v=d.x,w=d.y;if(d._unbind(S,t),d._unbind(T,t),d._unbind(k,t),d.options.onBeforeScrollEnd&&d.options.onBeforeScrollEnd.call(d,o),d.zoomed)return p=d.scale*d.lastScale,p=Math.max(d.options.zoomMin,p),p=Math.min(d.options.zoomMax,p),d.lastScale=p/d.scale,d.scale=p,d.x=d.originX-d.originX*d.lastScale+d.x,d.y=d.originY-d.originY*d.lastScale+d.y,d.scroller.style[h]="200ms",d.scroller.style[l]="translate("+d.x+"px,"+d.y+"px) scale("+d.scale+")"+M,d.zoomed=!1,d.refresh(),void(d.options.onZoomEnd&&d.options.onZoomEnd.call(d,o));if(!d.moved)return y&&(d.doubleTapTimer&&d.options.zoom?(clearTimeout(d.doubleTapTimer),d.doubleTapTimer=null,d.options.onZoomStart&&d.options.onZoomStart.call(d,o),d.zoom(d.pointX,d.pointY,1==d.scale?d.options.doubleTapZoom:1),d.options.onZoomEnd&&setTimeout(function(){d.options.onZoomEnd.call(d,o)},200)):this.options.handleClick&&(d.doubleTapTimer=setTimeout(function(){for(d.doubleTapTimer=null,i=f.target;1!=i.nodeType;)i=i.parentNode;"SELECT"!=i.tagName&&"INPUT"!=i.tagName&&"TEXTAREA"!=i.tagName&&(r=e.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,o.view,1,f.screenX,f.screenY,f.clientX,f.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,0,null),r._fake=!0,i.dispatchEvent(r))},d.options.zoom?250:0))),d._resetPos(400),void(d.options.onTouchEnd&&d.options.onTouchEnd.call(d,o));if(m<300&&d.options.momentum&&(b=v?d._momentum(v-d.startX,m,-d.x,d.scrollerW-d.wrapperW+d.x,d.options.bounce?d.wrapperW:0):b,g=w?d._momentum(w-d.startY,m,-d.y,d.maxScrollY<0?d.scrollerH-d.wrapperH+d.y-d.minScrollY:0,d.options.bounce?d.wrapperH:0):g,v=d.x+b.dist,w=d.y+g.dist,(d.x>0&&v>0||d.x<d.maxScrollX&&v<d.maxScrollX)&&(b={dist:0,time:0}),(d.y>d.minScrollY&&w>d.minScrollY||d.y<d.maxScrollY&&w<d.maxScrollY)&&(g={dist:0,time:0})),b.dist||g.dist)return c=n.max(n.max(b.time,g.time),10),d.options.snap&&(a=v-d.absStartX,s=w-d.absStartY,n.abs(a)<d.options.snapThreshold&&n.abs(s)<d.options.snapThreshold?d.scrollTo(d.absStartX,d.absStartY,200):(u=d._snap(v,w),v=u.x,w=u.y,c=n.max(u.time,c))),d.scrollTo(n.round(v),n.round(w),c),void(d.options.onTouchEnd&&d.options.onTouchEnd.call(d,o));if(d.options.snap)return a=v-d.absStartX,s=w-d.absStartY,n.abs(a)<d.options.snapThreshold&&n.abs(s)<d.options.snapThreshold?d.scrollTo(d.absStartX,d.absStartY,200):(u=d._snap(d.x,d.y),u.x==d.x&&u.y==d.y||d.scrollTo(u.x,u.y,u.time)),void(d.options.onTouchEnd&&d.options.onTouchEnd.call(d,o));d._resetPos(200),d.options.onTouchEnd&&d.options.onTouchEnd.call(d,o)}},_resetPos:function(t){var e=this,o=e.x>=0?0:e.x<e.maxScrollX?e.maxScrollX:e.x,i=e.y>=e.minScrollY||e.maxScrollY>0?e.minScrollY:e.y<e.maxScrollY?e.maxScrollY:e.y;if(o==e.x&&i==e.y)return e.moved&&(e.moved=!1,e.options.onScrollEnd&&e.options.onScrollEnd.call(e)),e.hScrollbar&&e.options.hideScrollbar&&("webkit"==a&&(e.hScrollbarWrapper.style[d]="300ms"),e.hScrollbarWrapper.style.opacity="0"),void(e.vScrollbar&&e.options.hideScrollbar&&("webkit"==a&&(e.vScrollbarWrapper.style[d]="300ms"),e.vScrollbarWrapper.style.opacity="0"));e.scrollTo(o,i,t||0)},_wheel:function(t){var e,o,i,n,r,a=this;if("wheelDeltaX"in t)e=t.wheelDeltaX/12,o=t.wheelDeltaY/12;else if("wheelDelta"in t)e=o=t.wheelDelta/12;else{if(!("detail"in t))return;e=o=3*-t.detail}if("zoom"==a.options.wheelAction)return r=a.scale*Math.pow(2,1/3*(o?o/Math.abs(o):0)),r<a.options.zoomMin&&(r=a.options.zoomMin),r>a.options.zoomMax&&(r=a.options.zoomMax),void(r!=a.scale&&(!a.wheelZoomCount&&a.options.onZoomStart&&a.options.onZoomStart.call(a,t),a.wheelZoomCount++,a.zoom(t.pageX,t.pageY,r,400),setTimeout(function(){!--a.wheelZoomCount&&a.options.onZoomEnd&&a.options.onZoomEnd.call(a,t)},400)));i=a.x+e,n=a.y+o,i>0?i=0:i<a.maxScrollX&&(i=a.maxScrollX),n>a.minScrollY?n=a.minScrollY:n<a.maxScrollY&&(n=a.maxScrollY),a.maxScrollY<0&&a.scrollTo(i,n,0)},_transitionEnd:function(t){var e=this;t.target==e.scroller&&(e._unbind(P),e._startAni())},_startAni:function(){var t,e,o,i=this,r=i.x,a=i.y,s=Date.now();if(!i.animating){if(!i.steps.length)return void i._resetPos(400);t=i.steps.shift(),t.x==r&&t.y==a&&(t.time=0),i.animating=!0,i.moved=!0,i.options.useTransition?(i._transitionTime(t.time),i._pos(t.x,t.y),i.animating=!1,t.time?i._bind(P):i._resetPos(0)):(o=function(){var l,c,h=Date.now();h>=s+t.time?(i._pos(t.x,t.y),i.animating=!1,i.options.onAnimationEnd&&i.options.onAnimationEnd.call(i),i._startAni()):(h=(h-s)/t.time-1,e=n.sqrt(1-h*h),l=(t.x-r)*e+r,c=(t.y-a)*e+a,i._pos(l,c),i.animating&&(i.aniTime=z(o)))})()}},_transitionTime:function(t){t+="ms",this.scroller.style[h]=t,this.hScrollbar&&(this.hScrollbarIndicator.style[h]=t),this.vScrollbar&&(this.vScrollbarIndicator.style[h]=t)},_momentum:function(t,e,o,i,r){var a=n.abs(t)/e,s=a*a/.0012,l=0,c=0;return t>0&&s>o?(c=r/(6/(s/a*6e-4)),o+=c,a=a*o/s,s=o):t<0&&s>i&&(c=r/(6/(s/a*6e-4)),i+=c,a=a*i/s,s=i),s*=t<0?-1:1,l=a/6e-4,{dist:s,time:n.round(l)}},_offset:function(t){for(var e=-t.offsetLeft,o=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,o-=t.offsetTop;return t!=this.wrapper&&(e*=this.scale,o*=this.scale),{left:e,top:o}},_snap:function(t,e){var o,i,r,a,s,l,c=this;for(r=c.pagesX.length-1,o=0,i=c.pagesX.length;o<i;o++)if(t>=c.pagesX[o]){r=o;break}for(r==c.currPageX&&r>0&&c.dirX<0&&r--,t=c.pagesX[r],s=n.abs(t-c.pagesX[c.currPageX]),s=s?n.abs(c.x-t)/s*500:0,c.currPageX=r,r=c.pagesY.length-1,o=0;o<r;o++)if(e>=c.pagesY[o]){r=o;break}return r==c.currPageY&&r>0&&c.dirY<0&&r--,e=c.pagesY[r],l=n.abs(e-c.pagesY[c.currPageY]),l=l?n.abs(c.y-e)/l*500:0,c.currPageY=r,a=n.round(n.max(s,l))||200,{x:t,y:e,time:a}},_bind:function(t,e,o){(e||this.wrapper).addEventListener(t,this,!!o)},_unbind:function(t,e,o){(e||this.wrapper).removeEventListener(t,this,!!o)},destroy:function(){var e=this;e.scroller.style[l]="",e.hScrollbar=!1,e.vScrollbar=!1,e._scrollbar("h"),e._scrollbar("v"),e._unbind(x,t),e._unbind(_),e._unbind(S,t),e._unbind(T,t),e._unbind(k,t),e.options.hasTouch||(e._unbind("DOMMouseScroll"),e._unbind("mousewheel")),e.options.useTransition&&e._unbind(P),e.options.checkDOMChanges&&clearInterval(e.checkDOMTime),e.options.onDestroy&&e.options.onDestroy.call(e)},refresh:function(){var t,e,o,i,r=this,a=0,s=0;if(r.scale<r.options.zoomMin&&(r.scale=r.options.zoomMin),r.wrapperW=r.wrapper.clientWidth||1,r.wrapperH=r.wrapper.clientHeight||1,r.minScrollY=-r.options.topOffset||0,r.scrollerW=n.round(r.scroller.offsetWidth*r.scale),r.scrollerH=n.round((r.scroller.offsetHeight+r.minScrollY)*r.scale),r.maxScrollX=r.wrapperW-r.scrollerW,r.maxScrollY=r.wrapperH-r.scrollerH+r.minScrollY,r.dirX=0,r.dirY=0,r.options.onRefresh&&r.options.onRefresh.call(r),r.hScroll=r.options.hScroll&&r.maxScrollX<0,r.vScroll=r.options.vScroll&&(!r.options.bounceLock&&!r.hScroll||r.scrollerH>r.wrapperH),r.hScrollbar=r.hScroll&&r.options.hScrollbar,r.vScrollbar=r.vScroll&&r.options.vScrollbar&&r.scrollerH>r.wrapperH,t=r._offset(r.wrapper),r.wrapperOffsetLeft=-t.left,r.wrapperOffsetTop=-t.top,"string"==typeof r.options.snap)for(r.pagesX=[],r.pagesY=[],i=r.scroller.querySelectorAll(r.options.snap),e=0,o=i.length;e<o;e++)a=r._offset(i[e]),a.left+=r.wrapperOffsetLeft,a.top+=r.wrapperOffsetTop,r.pagesX[e]=a.left<r.maxScrollX?r.maxScrollX:a.left*r.scale,r.pagesY[e]=a.top<r.maxScrollY?r.maxScrollY:a.top*r.scale;else if(r.options.snap){for(r.pagesX=[];a>=r.maxScrollX;)r.pagesX[s]=a,a-=r.wrapperW,s++;for(r.maxScrollX%r.wrapperW&&(r.pagesX[r.pagesX.length]=r.maxScrollX-r.pagesX[r.pagesX.length-1]+r.pagesX[r.pagesX.length-1]),a=0,s=0,r.pagesY=[];a>=r.maxScrollY;)r.pagesY[s]=a,a-=r.wrapperH,s++;r.maxScrollY%r.wrapperH&&(r.pagesY[r.pagesY.length]=r.maxScrollY-r.pagesY[r.pagesY.length-1]+r.pagesY[r.pagesY.length-1])}r._scrollbar("h"),r._scrollbar("v"),r.zoomed||(r.scroller.style[h]="0",r._resetPos(400))},scrollTo:function(t,e,o,i){var n,r,a=this,s=t;for(a.stop(),s.length||(s=[{x:t,y:e,time:o,relative:i}]),n=0,r=s.length;n<r;n++)s[n].relative&&(s[n].x=a.x-s[n].x,s[n].y=a.y-s[n].y),a.steps.push({x:s[n].x,y:s[n].y,time:s[n].time||0});a._startAni()},scrollToElement:function(t,e){var o,i=this;(t=t.nodeType?t:i.scroller.querySelector(t))&&(o=i._offset(t),o.left+=i.wrapperOffsetLeft,o.top+=i.wrapperOffsetTop,o.left=o.left>0?0:o.left<i.maxScrollX?i.maxScrollX:o.left,o.top=o.top>i.minScrollY?i.minScrollY:o.top<i.maxScrollY?i.maxScrollY:o.top,e=void 0===e?n.max(2*n.abs(o.left),2*n.abs(o.top)):e,i.scrollTo(o.left,o.top,e))},scrollToPage:function(t,e,o){var i,n,r=this;o=void 0===o?400:o,r.options.onScrollStart&&r.options.onScrollStart.call(r),r.options.snap?(t="next"==t?r.currPageX+1:"prev"==t?r.currPageX-1:t,e="next"==e?r.currPageY+1:"prev"==e?r.currPageY-1:e,t=t<0?0:t>r.pagesX.length-1?r.pagesX.length-1:t,e=e<0?0:e>r.pagesY.length-1?r.pagesY.length-1:e,r.currPageX=t,r.currPageY=e,i=r.pagesX[t],n=r.pagesY[e]):(i=-r.wrapperW*t,n=-r.wrapperH*e,i<r.maxScrollX&&(i=r.maxScrollX),n<r.maxScrollY&&(n=r.maxScrollY)),r.scrollTo(i,n,o)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(S,t),this._unbind(T,t),this._unbind(k,t)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(P):O(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(t,e,o,i){var n=this,r=o/n.scale;n.options.useTransform&&(n.zoomed=!0,i=void 0===i?200:i,t=t-n.wrapperOffsetLeft-n.x,e=e-n.wrapperOffsetTop-n.y,n.x=t-t*r+n.x,n.y=e-e*r+n.y,n.scale=o,n.refresh(),n.x=n.x>0?0:n.x<n.maxScrollX?n.maxScrollX:n.x,n.y=n.y>n.minScrollY?n.minScrollY:n.y<n.maxScrollY?n.maxScrollY:n.y,n.scroller.style[h]=i+"ms",n.scroller.style[l]="translate("+n.x+"px,"+n.y+"px) scale("+o+")"+M,n.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},r=null,void 0!==o?o.iScroll=E:t.iScroll=E}(window,document)},{}],2:[function(t,e,o){"use strict";e.exports={isHex:function(t){var e=!1;return e=!!/^#([A-Fa-f0-9]{3}){1,2}$/.test(t),e},hexToRgba:function(t,e){var o;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(t))return o=t.substring(1).split(""),3==o.length&&(o=[o[0],o[0],o[1],o[1],o[2],o[2]]),o="0x"+o.join(""),"rgba("+[o>>16&255,o>>8&255,255&o].join(",")+","+(e||.5)+")";throw new Error("Bad Hex")}}},{}],3:[function(t,e,o){"use strict";var i=function(t,e,o){e&&Object.defineProperties(t,e),o&&Object.defineProperties(t.prototype,o)},n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(){n(this,t)}return i(t,null,{initialize:{value:function(t){var e=t||{};this.id=e.id,this.name=e.name||"unnamed",this.layer=e.layer,this.controlBase=e.controlBase,this.group=e.group.id,this.fill=e.fill||"#bdbdbd",this.stroke=e.stroke||"#000000",this.strokeWidth=e.strokeWidth||1,this.paths=e.paths||[],this.posx=e.posx,this.posy=e.posy,this.width=e.width,this.height=e.height,this.showText=e.showText||!0,this.textHtml=e.textHtml,this.x1=e.x1,this.x2=e.x2,this.y1=e.y1,this.y2=e.y2,"polygon"===this.type?(this.centerx=this.posx,this.centery=this.posy):(this.centerx=this.posx+this.width/2,this.centery=this.posy+this.height/2)},writable:!0,configurable:!0},getTotalInfo:{value:function(){return{x:this.posx,y:this.posy,width:this.width,height:this.height}},writable:!0,configurable:!0},getSize:{value:function(){return{width:this.width,height:this.height}},writable:!0,configurable:!0},getPosition:{value:function(){return{x:this.posx,y:this.posy}},writable:!0,configurable:!0},getCenterPosition:{value:function(){return{x:this.centerx,y:this.centery}},writable:!0,configurable:!0},getTextPosition:{value:function(){return{x:this.posx,y:this.posy,label:""}},writable:!0,configurable:!0}}),t}();e.exports=r},{}],4:[function(t,e,o){"use strict";var i=function(t){return t&&t.__esModule?t.default:t},n=function(t,e,o){e&&Object.defineProperties(t,e),o&&Object.defineProperties(t.prototype,o)},r=function t(e,o,i){var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n&&n.writable)return n.value;var a=n.get;if(void 0!==a)return a.call(i)},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},l=i(t("../base")),c=(i(t("../../color")),i(t("../../events")),function(t){function e(t,o,i){s(this,e),r(Object.getPrototypeOf(e.prototype),"initialize",this).call(this,t);var n=this,a='<div class="shape-controller" id="control-'+this.id+'" style="position:absolute;padding:5px;"> <div class="controller-wrapper" style="position:relative;width:100%;height:100%;border:1px solid #6799FF;">   <div class="handler" handler-type="lt" style="cursor:nw-resize;width:5px;height:5px;background:#6799FF;position:absolute;left:0px;top:0px;"></div>   <div class="handler" handler-type="lb" style="cursor:sw-resize;width:5px;height:5px;background:#6799FF;position:absolute;left:0px;bottom:0px;"></div>   <div class="handler" handler-type="rt" style="cursor:ne-resize;width:5px;height:5px;background:#6799FF;position:absolute;right:0px;top:0px;"></div>   <div class="handler" handler-type="rb" style="cursor:se-resize;width:5px;height:5px;background:#6799FF;position:absolute;right:0px;bottom:0px;"></div> </div></div>';this.type="image",t.width||(this.width=25),t.height||(this.height=25),this.controller=$(a),this.textObj=$('<span class="text-obj"></span>').css({position:"absolute",padding:2,"border-radius":5,"font-size":10,"pointer-events":"none","font-weight":"normal","text-align":"center",color:"#ffffff","background-color":"#000000"}),t.image?(this.image=t.image,i&&n.render(o)):function(){var e=new Image;e.onload=function(){n.image=e,i&&n.render(o)},e.src=t.url}()}return a(e,t),n(e,null,{render:{value:function(t){t.drawImage(this.image,this.posx,this.posy,this.width,this.height),this.addText()},writable:!0,configurable:!0},addText:{value:function(){var t=this,e=this,o=this.controlBase;this.showText&&function(){t.textHtml?t.textObj=$(t.textHtml):t.textObj.attr("id","text-"+t.id).attr("group-id",t.group).text(t.name||"unnamed").css({left:t.posx+t.width/2-t.textObj.width()/2,top:t.posy+t.height+5});var i=setTimeout(function(){clearTimeout(i),o.append(e.textObj)},100)}()},writable:!0,configurable:!0},modifyShape:{value:function(t,e){this.posx=t.left,this.posy=t.top,t.width&&(this.width=t.width),t.height&&(this.height=t.height),this.centerx=this.posx+this.width/2,this.centery=this.posy+this.height/2,"function"==typeof e&&e()},writable:!0,configurable:!0},select:{value:function(t,e){var o=this;this.controller.css({width:this.width+10,height:this.height+10,left:this.posx-5,top:this.posy-5}),o.controlBase.append(this.controller)},writable:!0,configurable:!0},unSelect:{value:function(){this.controller.remove()},writable:!0,configurable:!0},getImage:{value:function(){return this.image},writable:!0,configurable:!0}}),e}(l));e.exports=c},{"../../color":2,"../../events":7,"../base":3}],5:[function(t,e,o){"use strict";var i=function(t,e,o){e&&Object.defineProperties(t,e),o&&Object.defineProperties(t.prototype,o)},n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(e){n(this,t),Object.assign(this,e),e.stroke||(this.stroke="#6799FF"),e.strokeWidth||(this.strokeWidth=2),e.strokeStyle||(this.strokeStyle="full"),e.strokeDash||(this.strokeDash=1)}return i(t,null,{render:{value:function(t,e){t.beginPath(),t.moveTo(this.sx,this.sy),t.lineTo(this.ex,this.ey),t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke(),t.closePath(),"function"==typeof e&&e()},writable:!0,configurable:!0},modifyPosition:{value:function(t,e,o){var i=this;switch(t){case"start":i.sx=e,i.sy=o;break;case"end":i.ex=e,i.ey=o}},writable:!0,configurable:!0}}),t}();e.exports=r},{}],6:[function(t,e,o){"use strict";var i=function(t){return t&&t.__esModule?t.default:t},n=function(t,e,o){e&&Object.defineProperties(t,e),o&&Object.defineProperties(t.prototype,o)},r=function t(e,o,i){var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n&&n.writable)return n.value;var a=n.get;if(void 0!==a)return a.call(i)},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},l=i(t("../base")),c=i(t("../../color")),h=function(t){function e(t,o){s(this,e),r(Object.getPrototypeOf(e.prototype),"initialize",this).call(this,t),this._prevData={paths:null,fill:null,stroke:null,strokeWidth:null,opacity:null},this.textObj=$('<span class="text-obj"></span>').css({position:"absolute","pointer-events":"none","font-size":10,"font-weight":"normal","text-align":"center",color:"#000000"}),this.type="polygon",this.fill=c.isHex(t.fill)?c.hexToRgba(t.fill,t.opacity):t.fill}return a(e,t),n(e,null,{render:{value:function(t){var e=null,o=null,i=null,n=null;e=this.paths,o=this.fill,i=this.stroke,n=this.strokeWidth,t.beginPath(),t.strokeStyle=i,t.lineWidth=n,e.forEach(function(e,o){switch(o){case 0:t.moveTo(e.x,e.y);break;default:t.lineTo(e.x,e.y)}}),t.fillStyle=c.isHex(o)?c.hexToRgba(o,null):o,t.fill(),t.stroke(),t.closePath(),this.addText()},writable:!0,configurable:!0},addText:{value:function(){var t=this.controlBase;this.showText&&(this.textHtml?this.textObj=$(this.textHtml):this.textObj.attr("id","text-"+this.id).attr("group-id",this.group).empty().text(this.name||"unnamed").css({left:this.posx,top:this.posy}),t.append(this.textObj))},writable:!0,configurable:!0},select:{value:function(){this._prevFill=this.fill,this.fill="#C90000"},writable:!0,configurable:!0},unSelect:{value:function(){this._prevFill&&(this.fill=this._prevFill)},writable:!0,configurable:!0}}),e}(l);e.exports=h},{"../../color":2,"../base":3}],7:[function(t,e,o){"use strict";var i=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t}(),n=function(t){var e=null;return e=i?t.originalEvent.touches[0]:t,{x:e.pageX?parseInt(e.pageX):0,y:e.pageY?parseInt(e.pageY):0}},r=function(t){var e=null;return e=i?t.originalEvent.touches[0]:t,{x:e.offsetX?parseInt(e.offsetX):0,y:e.offsetY?parseInt(e.offsetY):0}};e.exports={getEventPost:n,getEventOffset:r,HAS_TOUCH:i,START:i?"touchstart":"mousedown",MOVE:i?"touchmove":"mousemove",END:i?"touchend":"mouseup",CANCEL:i?"touchcancel":"mouseup",CLICK:"click",DOUBLE_CLICK:"dblclick",OVER:"mouseover",OUT:"mouseout",RESIZE:"onorientationchange"in window?"orientationchange":"resize",URL_CHANGE:"onpopstate"in window?"popstate":"hashchange",INPUT_CHECK:"blur",FILE_CHECK:"change",CHANGE:"change",REFRESH:"refresh",SELECT:"select",NOT_EXIST:"notExist",DRAG_START:"dragStart",DRAG_END:"dragEnd",API_COMPLETE:"apiComplete",LOAD_COMPLETE:"loadComplete",UPLOAD_COMPLETE:"uploadComplete",KEY:"keypress",ONLOAD:"onload",DISPLAY_CHANGE:"onShowHide",ZOOM_CHANGE:"changeZoom",DRAW_CLICK:"click.draw",DRAW_START:i?"touchstart.draw":"mousedown.draw",DRAW_MOVE:i?"touchmove.draw":"mousemove.draw",DRAW_END:i?"touchend.draw":"mouseup.draw",getEventPos:n,getEventOffset:r}},{}],8:[function(t,e,o){"use strict";var i=function(t){return t&&t.__esModule?t.default:t},n=function(t,e,o){e&&Object.defineProperties(t,e),
o&&Object.defineProperties(t.prototype,o)},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=i(t("../lib/iscroll/iScroll-custom")),s=i(t("./events")),l=i(t("./layer")),c=i(t("./selector"));Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)};var h=a.iScroll;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}(),window.cancelRequestAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}();var u=function(){function t(e){r(this,t),this._palette=null,this._base=null,this._scrollDiv=null,this._flaatsBase=null,this._layer=null,this._layerList={},this._size={width:3e3,height:2e3},this._scale=null,this._zoomLevel=0,this._step=4,this.mode="move",this._controlLayer=null,this.onInitialize=function(){},this._selector=new c,this._startPos=null,this._polygon=null,this._drawingPathArr=[],this._initialize(e)}return n(t,null,{_initialize:{value:function(t){var e=this;for(var o in t){var i=t[o];switch(o){case"base":e._base=i;break;case"layer":e._layer=i;break;case"size":e._size=i;break;case"step":e._step=i;break;case"zoomLevel":e._zoomLevel=i;break;case"scale":e._scale=i;break;default:e[o]=i}}try{if(!t.base)throw"base is not defined";this._base=$(t.base);var n=parseFloat(this._base.width()),r=parseFloat(this._base.height());this.setBase(n,r,function(t){var o=setTimeout(function(){clearTimeout(o),e.onInitialize(t)})})}catch(t){console.error(t.toString())}},writable:!0,configurable:!0},setBase:{value:function(t,e,o){var i=this,n=function(o,n){var r="";r='<div class="map-base" style="position:absolute;opacity:0.5;top:0px;left:0px;user-select:none;">',o&&(r+='<img src="'+o+'" />'),r+="</div>";var a=$(r).css({width:i._size.width,height:i._size.height});i._scrollDiv.find(".map-base").remove(),i._scrollDiv.prepend(a).css({width:i._size.width,height:i._size.height}),i._flaatsBase=a,i._scroll=new h(i._base[0],{zoomMin:.1,hScrollbar:!1,vScrollbar:!1,bounce:!1,momentum:!1,lockDirection:!1,wheelAction:"none"});var s=parseFloat((1/Math.max(i._size.width/t,i._size.height/e)).toFixed(3));"number"!=typeof i._step&&(i._step=4),"number"!=typeof i._scale&&(i._scale=1.5),i._zoomValue=[];for(var l=0;l<i._step;l++)0==l?i._zoomValue.push(s):i._zoomValue.push(parseFloat(s*(l*i._scale).toFixed(3)));void 0==i._zoomValue[i._zoomLevel]&&(i._zoomLevel=0),i.setZoom(i._zoomLevel,function(){i._layer||(i._layer=[{id:"common-layer",name:"공통 레이어",type:"canvas"}]);try{for(var t=0;t<i._layer.length;t++){var e=i._layer[t];if(!e.id)throw"layer.id is not exist.";i.addLayer(e.id,e.name,e.type,t,function(){i.getObjSize(i._layerList)==i._layer.length&&"function"==typeof n&&n(i._flaatsBase)})}}catch(t){console.error(t),"function"==typeof n&&n(i._flaatsBase)}})};this._scrollDiv||(this._scrollDiv=$('<div id="map-scroller" class="map-view" style="opacity:0;"></div>'),this._base.append(this._scrollDiv));try{if(this.image){var r=new Image;r.onload=function(){i._size.width=r.width,i._size.height=r.height,n(i.image,function(t){"function"==typeof o&&o(t)})},r.onerror=function(t){throw t},r.src=this.image}else n(null,o)}catch(t){console.error("set canvas base error: ",t.toString())}},writable:!0,configurable:!0},getObjSize:{value:function(t){var e=0;for(var o in t)e++;return e},writable:!0,configurable:!0},moveToEl:{value:function(t,e,o){var i=this.getLayer(t),n=i.getShape(e,o),r=this._scroll,a=void 0,s=void 0,l=void 0,c=void 0;switch(n.type){case"polygon":case"image":a=n.posx*this._scroll.scale-this._base.width()/2,s=n.posy*this._scroll.scale-this._base.height()/2}l=-1*this._scroll.maxScrollX,c=-1*this._scroll.maxScrollY,a=a<0?0:a,a=a>l?l:a,s=s<0?0:s,s=s>c?c:s,this.setZoom(2,function(){r.scrollTo(-1*a,-1*s)})},writable:!0,configurable:!0},addShape:{value:function(t,e,o){var i=0,n=this.getLayer(t)||this.getLayer("common-layer");if(!n)throw"target layer is not defined";if(e.length)if(e.length>0)for(var r=0;r<e.length;r++){var a=e[r],s=n.addGroup(a,a.group);s?++i==e.length&&n.drawLayer(function(){"function"==typeof o&&o(!1)}):"function"==typeof o&&o(!1)}else"function"==typeof o&&o(!1);else if("{}"!=JSON.stringify(e))for(var l in e){var a=e[l],s=n.addGroup(a,a.group);s?++i==Object.keys(e).length&&n.drawLayer(function(){"function"==typeof o&&o(!1)}):"function"==typeof o&&o(!1)}else"function"==typeof o&&o(!1)},writable:!0,configurable:!0},addLink:{value:function(t,e,o,i){var n=this.getLayer(t)||this.getLayer("common-layer");if(!n)throw"target layer is not defined";e.length?e.length>0?n.addLink(e,o,function(){"function"==typeof i&&i(!1)}):"function"==typeof i&&i(!1):"{}"!=JSON.stringify(e)?n.addLink(e,o,function(){"function"==typeof i&&i(!1)}):"function"==typeof i&&i(!1)},writable:!0,configurable:!0},setSelector:{value:function(t){var e=this,o=$(document),i=e._controlLayer,n=Object.assign({},t),r=n.onSelected||function(){};if(!e._controlLayer)for(var a in e._layerList){var l=e._layerList[a];1==l.zIndex&&(i=l)}this._base.unbind(s.START).bind(s.START,function(n){if(n.stopPropagation(),i.unselectShapeAll(),0==n.button&&e._selectMode){if(!e._selector.enable||void 0==i)return!1;e._selector.start(i.base,i.layerObj,n,function(){}),o.bind(s.MOVE,function(t){t.stopPropagation(),e._selector.draw(i.layerObj,t,function(){})}),i.base.one(s.END,function(n){n.stopPropagation(),o.unbind(s.MOVE),e._selector.end(i.layerObj,n,function(e,o,n,a){var s=Math.round(e),l=Math.round(o),c=s+n,h=l+a,u=null;u=i.searchByPosition(s,l,c,h),i.selectShape(u,t.resize||{},t.dnd||{}),"function"==typeof r&&r(u)})})}})},writable:!0,configurable:!0},getZoom:{value:function(){return this._zoomLevel},writable:!0,configurable:!0},setZoom:{value:function(t,e,o){var i=this._scroll,n=this._zoomValue[t];if(n==i.scale)"function"==typeof e&&e(this._zoomLevel);else{var r=i._offset(i.wrapper),a=i.wrapperW/2+r.left,s=i.wrapperH/2+r.top;i.zoom(a,s,n,o),this.refresh(),"function"==typeof e&&e(this._zoomLevel)}},writable:!0,configurable:!0},refresh:{value:function(){var t=this._base,e=this._scroll,o=t.width(),i=t.height(),n=null,r=null,a=null,s=null,l=null;e.refresh(),n=e.scrollerW,r=e.scrollerH,a=e.x>0?0:e.x,s=e.y>0?0:e.y,this._scrollDiv.css({"margin-top":Math.max((i-r)/2,0),"margin-left":Math.max((o-n)/2,0)}),e.scrollTo(a,s),1!=this._scrollDiv.css("opacity")&&this._scrollDiv.css("opacity",1),l=setTimeout(function(){clearTimeout(l),e.refresh()},100)},writable:!0,configurable:!0},addLayer:{value:function(t,e,o,i,n){var r=this._flaatsBase.css("width"),a=this._flaatsBase.css("height"),s=new l(this._scrollDiv,{id:t,name:e||t,type:o,width:r,height:a,zIndex:i});this._layerList[t]=s,"function"==typeof n&&n(s)},writable:!0,configurable:!0},getLayer:{value:function(t){return this._layerList[t]},writable:!0,configurable:!0},getLayerList:{value:function(){return this._layerList},writable:!0,configurable:!0},destroyEvent:{value:function(t){var e=$(document),o=this._layerList;for(var i in o){var n=o[i];n.initVariables(),n.drawLayer();var r=n.base;n.controlBase.css("pointer-events","none"),n.unselectShapeAll(),r.unbind(s.DRAW_START),r.unbind(s.DRAW_MOVE),r.unbind(s.DRAW_END),r.removeClass("drawing")}e.unbind(s.DRAW_MOVE),e.unbind(s.MOVE),this._base.removeClass("move"),this._base.removeClass("selector"),this._base.unbind(s.START),this._base.unbind(s.end),"function"==typeof t&&t()},writable:!0,configurable:!0},changeMode:{value:function(t,e){var o=this,i=Object.assign({},e),n=(i.onSelected,i.onChangeModeFinished);switch(t){case"move":this.destroyEvent(function(){o._selectMode=!1,o._scroll.enable(),o._selector.enable=!1,o._base.addClass("move")});break;case"select":this.destroyEvent(function(){o._selectMode=!0,o._selector.enable=!0,o.setSelector(e),o._scroll.disable()});break;case"none":for(var r in this._layerList){this._layerList[r].base.removeClass("drawing")}this._base.removeClass("move"),this._selectMode=!1,o._selector.enable=!1,this._scroll.disable()}"function"==typeof n&&n()},writable:!0,configurable:!0},linkShape:{value:function(t){var e=t.layerId,o=Object.assign({},t),i=void 0;if(e)i=this.getLayer(e);else{var n=this.getLayerList();for(var r in n){var a=n[r];1==a.zIndex&&(i=a)}}if(!(void 0!=o.target&&o.link.length>0))return!1;i.linkShape(o.target,o.link,t.option||{})},writable:!0,configurable:!0},drawingShape:{value:function(t){var e=this,o=this,i=null,n=($(document),Object.assign({},t)),r=n.layerId?n.layerId:null,a=!n.isSet||n.isSet,l=n.section?n.section:null,c=n.option?n.option:{},h=n.onDragMove||function(){},u=n.onFinished||function(){};try{if(!r)throw"layer id is not defined";this.changeIdx(r,function(r){i=r.base,i.unbind(s.DRAW_MOVE),i.unbind(s.DRAW_END),a&&l?(e._preMapMode=e.mode,e.changeMode("none"),i.bind(s.DRAW_MOVE,function(t){var e=o.getBasePosition(t);r.drawShape(e,c),h(e)}),i.bind(s.DRAW_END,function(e){var n=o.getBasePosition(e);i.unbind(s.DRAW_MOVE),r.addObj(n,l,c,function(){"function"==typeof u&&u(n),o.drawingShape(t)})})):!a&&l&&(n.isSet=!0,o.drawingShape(n))})}catch(t){console.error("[setting object error]"+t)}},writable:!0,configurable:!0},drawingPolygon:{value:function(t){var e=this,o=this,i=null,n=$(document),r=Object.assign({},t),a=r.layerId?r.layerId:null,l=!r.isSet||r.isSet,c=r.section?r.section:null,h=r.option?r.option:{},u=r.onDrawStart||function(){},p=r.onDraw||function(){},d=r.onFinished||function(){};try{if(!a)throw"layer id is not defined";this.changeIdx(a,function(a){if(i=a.base,o._polygon&&(a.remove(o._polygon),o._polygon=null,o._startPos=null,o._drawingPathArr=[]),i.unbind(s.DRAW_START),n.unbind(s.DRAW_MOVE),l&&c)i.removeClass("drawing"),e._preMapMode=e.mode,e.changeMode("none"),i.addClass("drawing"),i.bind(s.DRAW_START,function(e){var i=o.getBasePosition(e),r=o._drawingPathArr.length,l=0==r,f=r>3&&null!=o._startPos&&Math.sqrt(Math.pow(i.x-o._startPos.x,2)+Math.pow(i.y-o._startPos.y,2))<=3;0==e.button&&(u(i),l?("canvas"===a.type?o._polygon={}:a.editPolygon(o._polygon,[i],h,!1,!1),o._drawingPathArr.push(i),o._startPos=i,n.bind(s.DRAW_MOVE,function(t){var e=o.getBasePosition(t),i=Math.sqrt(Math.pow(e.x-o._startPos.x,2)+Math.pow(e.y-o._startPos.y,2)),n=o._drawingPathArr.length;if(p(e),i<=3&&n>3){var r=o._drawingPathArr;r.push(o._startPos),a.editPolygon(o._polygon,o._drawingPathArr,h,!0,!1)}else{for(var s=[],l=0;l<o._drawingPathArr.length;l++){var c=o._drawingPathArr[l];0!=l&&c.x!=o._startPos&&c.y!=o._startPos.y?s.push(c):0==l&&s.push(c)}o._drawingPathArr=s;var r=[].concat(s,[e]);a.editPolygon(o._polygon,r,h,!1,!1)}})):f?(o._drawingPathArr.push(o._startPos),a.addPolygon(o._polygon,o._drawingPathArr,c,h,function(){console.log("option is: ",h);for(var e in h)"fill"!=e&&"stroke"!=e&&"strokeWidth"!=e&&"opacity"!=e&&delete h[e];"function"==typeof d&&d(i),o.drawingPolygon(t)})):(o._drawingPathArr.push(i),a.editPolygon(o._polygon,o._drawingPathArr,h,!1,!1)))});else{if(l||!c)return!1;r.isSet=!0,e.drawingPolygon(r)}})}catch(t){}},writable:!0,configurable:!0},controlLayerView:{value:function(t,e){var o=this.getLayer(t);switch(e){case!0:o.showLayer();break;case!1:o.hideLayer()}},writable:!0,configurable:!0},controlGroupView:{value:function(t,e,o){var i=this.getLayer(t);switch(o){case!0:i.showGroup(e);break;case!1:i.hideGroup(e)}},writable:!0,configurable:!0},deleteGroup:{value:function(t,e,o){this.getLayer(t).deleteGroup(e,function(){"function"==typeof o&&o()})},writable:!0,configurable:!0},getBasePosition:{value:function(t){var e=t.offsetX,o=t.offsetY;return{x:parseInt(e),y:parseInt(o)}},writable:!0,configurable:!0},changeIdx:{value:function(t,e){var o=this.getLayer(t),i=null;for(var t in this._layerList){var n=this._layerList[t];1==n.zIndex&&(i=n)}try{if(!o)throw"target layer is empty."+t;if(o===i)"function"==typeof e&&e(o);else{var r=o.zIndex;o.changeIndex(i.zIndex),i.changeIndex(r),r=null,this._controlLayer=o,"function"==typeof e&&e(o)}}catch(t){console.error("change index error: ",t.toString())}},writable:!0,configurable:!0},destroy:{value:function(){var t=this;for(var e in this._layerList){t._layerList[e].destroy()}this._palette=null,this._base=null,this._scrollDiv=null,this._flaatsBase=null,this._scale=null,this._zoomLevel=0,this._step=4,this.mode="move",this._controlLayer=null,this.onInitialize=function(){},this._selector=null,this._startPos=null,this._polygon=null,this._drawingPathArr=[]},writable:!0,configurable:!0}}),t}();e.exports?e.exports=u:window.Flaats=u},{"../lib/iscroll/iScroll-custom":1,"./events":7,"./layer":9,"./selector":10}],9:[function(t,e,o){"use strict";var i=function(t){return t&&t.__esModule?t.default:t},n=function(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)},r=function(t,e,o){e&&Object.defineProperties(t,e),o&&Object.defineProperties(t.prototype,o)},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=i(t("./events")),l=i(t("./color")),c=i(t("./element/canvas/polygon")),h=i(t("./element/canvas/Image")),u=i(t("./element/canvas/Link")),p=function(){function t(e,o){a(this,t),this.base=null,this.layerObj=null,this.name=o.name,this.layerObjId=null,this.type=o.type||"canvas",this.target=e,this.layerId=o.id,this.width=parseFloat(o.width),this.height=parseFloat(o.height),this.zIndex=o.zIndex+1,this.editShape=null,this.controlBase=null,this._drawPath=null,this._drawStartPos=null,this._editPathArr=[],this._group={},this._uniqueId=0,this._selectedShape=[],this.imageUrl=null,this.image=null,this._linkInfo=[],this.initialize()}return r(t,null,{initialize:{value:function(){var t=this,e=$('<div class="control-base"></div>').css({width:"100%",height:"100%",position:"absolute","pointer-events":"none"}),o=$('<div class="layer-base"></div>').css({position:"absolute",top:0,left:0,"z-index":t.zIndex,width:t.width,height:t.height});this.controlBase=e;try{switch(o.attr("layer-id",this.layerId),o.append(e),this.target.append(o),this.type){case"canvas":t.layerObjId="canvas-"+t.layerId;var i=document.createElement("canvas");i.id=t.layerObjId,i.width=t.width,i.height=t.height,o.append($(i)),this.layerObj=i}this.base=o}catch(t){console.error("set layer error:",t.toString())}},writable:!0,configurable:!0},initVariables:{value:function(){this._drawPath=null,this._drawStartPos=null,this._editPathArr=[],this.imageUrl=null,this.image=null},writable:!0,configurable:!0},showLayer:{value:function(){this.base.css("display","")},writable:!0,configurable:!0},hideLayer:{value:function(){this.base.css("display","none")},writable:!0,configurable:!0},showGroup:{value:function(t){this._group[t].show=!0,this.controlBase.find('.text-obj[group-id="'+t+'"]').css("display",""),this.drawLayer()},writable:!0,configurable:!0},hideGroup:{value:function(t){this._group[t].show=!1,this.controlBase.find('.text-obj[group-id="'+t+'"]').css("display","none"),this.drawLayer()},writable:!0,configurable:!0},changeIndex:{value:function(t){this.zIndex=t,this.base.css("z-index",t)},writable:!0,configurable:!0},linkShape:{value:function(t,e,o){for(var i=this,r=[],a=0;a<e.length;a++){var s=e[a],l={id:t.id+"~"+s.id,targetId:t.id,linkId:s.id,layer:i.layerObj,sx:t.posx+t.width/2,sy:t.posy+t.height/2,ex:s.posx+s.width/2,ey:s.posy+s.height/2};l=Object.assign(l,o),r.push(l)}this._linkInfo=[].concat(n(this._linkInfo),r),this.drawLayer()},writable:!0,configurable:!0},addLink:{value:function(t,e,o){var i=this;for(var r in t){t[r].layer=i.layerObj}this._linkInfo=[].concat(n(this._linkInfo),n(t)),this.drawLink(function(){"function"==typeof o&&o()})},writable:!0,configurable:!0},remove:{value:function(t){this.type},writable:!0,configurable:!0},searchByPosition:{value:function(t,e,o,i){var n=this,r=[];for(var a in this._group){var s=n._group[a],l=s.items;for(var c in l){var h=l[c].obj;switch(h.type){case"polygon":t===o&&e===i?t>h.x1&&h.x2>o&&e>h.y1&&h.y2>i&&r.push(h):t<h.posx&&h.posx<o&&e<h.posy&&h.posy<i&&r.push(h);break;case"image":var u=h.posx,p=h.posy,d=h.posx+h.width,f=h.posy+h.height;t===o&&e===i?t>u&&d>o&&e>p&&f>i&&r.push(h):t<u&&d<o&&e<p&&f<i&&r.push(h)}}}return r},writable:!0,configurable:!0},selectShape:{value:function(t,e,o){if(this._selectedShape=t,t.length>0){for(var i=0;i<t.length;i++){t[i].select()}this.controlBase.css("pointer-events","")}this.drawLayer(),this.controlHandler(e,o)},writable:!0,configurable:!0},getBoundingPosition:{value:function(t){var e=this.layerObj.getBoundingClientRect(),o=(t.clientX-e.left)*(this.layerObj.width/e.width),i=(t.clientY-e.top)*(this.layerObj.height/e.height);return{x:parseInt(o),y:parseInt(i)}},writable:!0,configurable:!0},controlHandler:{value:function(t,e){var o=this,i=$(document);this.controlBase.unbind(s.DRAW_START),i.unbind(s.DRAW_MOVE),this.controlBase.unbind(s.DRAW_END),this.controlBase.bind(s.DRAW_START,function(n){var r=$(n.target),a=r.closest(".shape-controller");r.hasClass("handler")?function(){var l=o.getBoundingPosition(n),c=r.attr("handler-type"),h=a.attr("id").split("control-")[1],u=l.x,p=l.y,d=parseInt(a.width()),f=parseInt(a.height()),b=void 0,g=void 0;switch(c){case"lt":b=u+d,g=p+f;break;case"lb":b=u+d,g=p-f;break;case"rt":b=u-d,g=p+f;break;case"rb":b=u-d,g=p-f}n.stopPropagation(),i.bind(s.DRAW_MOVE,function(t){t.stopPropagation();var e=o.getBoundingPosition(t);switch(c){case"lt":e.x<b&&(u=e.x,d=b-e.x),e.y<g&&(p=e.y,f=g-e.y);break;case"lb":e.x<b&&(u=e.x,d=b-e.x),e.y>g&&(p=g,f=e.y-g);break;case"rt":e.x>b&&(u=b,d=e.x-b),e.y<g&&(p=e.y,f=g-e.y);break;case"rb":e.x>b&&(u=b,d=e.x-b),e.y>g&&(p=g,f=e.y-g)}a.css({left:u-5,top:p-5,width:d+10,height:f+10}),o.modifyShape({id:h,left:u,top:p,width:d,height:f},function(){o.drawLayer()})}),"function"==typeof t.onResize&&t.onResize(o.getShape(null,h),moveLeft,moveTop,moveWidth,moveHeight),o.controlBase.one(s.DRAW_END,function(i){i.stopPropagation();o.getBoundingPosition(i);"function"==typeof t.onEnd&&t.onEnd(o.getShape(null,h),u,p,d,f),o.controlHandler(t,e)})}():r.hasClass("controller-wrapper")&&function(){var r=a.attr("id").split("control-")[1];n.stopPropagation();var l=parseInt(a.width()),c=parseInt(a.height());i.bind(s.DRAW_MOVE,function(t){t.stopPropagation();var i=o.getBoundingPosition(t),n=i.x-l/2,s=i.y-c/2;a.css({left:n-5,top:s-5}),"function"==typeof e.onMove&&e.onMove(o.getShape(null,r),n,s),o.modifyShape({left:n,top:s,id:r},function(){o.drawLayer()})}),o.controlBase.one(s.DRAW_END,function(i){i.stopPropagation();var n=o.getBoundingPosition(i),s=n.x-l/2,h=n.y-c/2;a.css({left:s-5,top:h-5}),o.modifyShape({left:s,top:h,id:r},function(){o.drawLayer(),o.controlHandler(t,e),"function"==typeof e.onEnd&&e.onEnd(o.getShape(null,r),s,h)})})}()})},writable:!0,configurable:!0},linkMove:{value:function(t,e){for(var o=this,i=0;i<this._linkInfo.length;i++){var n=o._linkInfo[i],r=n.obj,a=null,s=t.posx+t.width/2,l=t.posy+t.height/2;n.targetId===t.id&&(a="start"),n.linkId===t.id&&(a="end"),r.modifyPosition(a,s,l)}"function"==typeof e&&e()},writable:!0,configurable:!0},modifyShape:{value:function(t,e){var o=this,i=this._selectedShape;if(i.length>0)for(var n=0;n<i.length;n++)!function(n){var r=i[n];r.id==t.id&&r.modifyShape(t,function(){o.linkMove(r,function(){"function"==typeof e&&e()})})}(n)},writable:!0,configurable:!0},unselectShapeAll:{value:function(){for(var t=this._selectedShape,e=0;e<t.length;e++){t[e].unSelect()}this.drawLayer()},writable:!0,configurable:!0},addObj:{value:function(t,e,o,i){var n=Object.assign({},o);if(this._group[e.id]||(this._group[e.id]={name:e.name||e.id,show:!0,items:{}}),n.id||(this._uniqueId++,n.id=e.id+"-"+this._uniqueId),"image"===n.type){var r=new Image;r.src=n.url,n.image=r}n.width||(n.width=25),n.height||(n.height=25),n.type=o.type,n.posx=t.x,n.posy=t.y,n.layer=this.layerObj,n.controlBase=this.controlBase,n.group={id:e.id,show:this._group[e.id].show,name:this._group[e.id].name},this._group[e.id].items[n.id]||(this._group[e.id].items[n.id]=n,this.drawLayer(i))},writable:!0,configurable:!0},addPolygon:{value:function(t,e,o,i,n){var r=null;this._group[o]||(this._group[o]={name:o,show:!0,items:{}}),r=i||{},r.type="polygon";var a=null;r.id?a=r.id:(this._uniqueId++,a=o+"_"+this._uniqueId);var s=null;s=r.name?r.name:"unnamed";var l=this.getObjPolygonInfo(e,r);for(var c in r)l[c]=r[c];if(l.type="polygon",l.id=a,l.name=s,l.layer=this.layerObj,l.controlBase=this.controlBase,l.group={id:o,show:this._group[o].show,name:this._group[o].name},l.showText=!0,this._group[o].items[a])throw"object is duplicated in this group";this._group[o].items[a]=l,this.drawLayer(n)},writable:!0,configurable:!0},getShape:{value:function(t,e){var o=null;if(this._group)if(void 0!=t){if(this._group[t]){var i=this._group[t].items;for(var n in i){var r=i[n];n===e&&(o=r)}}}else{var a=[];for(var s in this._group){var l=this._group[s];for(var c in l.items){var r=l.items[c];r.id===e&&a.push(r)}}o=a}return o},writable:!0,configurable:!0},addGroup:{value:function(t,e){var o=e.id,i=e.name;return this._group[o]||(this._group[o]={name:i||o,show:!0,items:{}}),!this._group[o].items[t.id]&&(t.layer&&"{}"!=JSON.stringify(t.layer)||(t.layer=this.layerObj),t.controlBase&&"{}"!=JSON.stringify(t.controlBase)||(t.controlBase=this.controlBase),this._group[o].items[t.id]=t,!0)},writable:!0,configurable:!0},deleteGroup:{value:function(t,e){this._group[t]&&delete this._group[t],this.drawLayer(function(){"function"==typeof e&&e()})},writable:!0,configurable:!0},drawLink:{value:function(t){for(var e=this,o=this.layerObj.getContext("2d"),i=0;i<this._linkInfo.length;i++){var n=e._linkInfo[i];n.obj||(n.obj=new u(n));n.obj.render(o)}"function"==typeof t&&t()},writable:!0,configurable:!0},drawLayer:{value:function(t){var e=this,o=e.layerObj.getContext("2d"),i=this.width,n=this.height;o.clearRect(0,0,i,n);for(var r=0;r<this._linkInfo.length;r++){var a=e._linkInfo[r];a.obj||(a.obj=new u(a));a.obj.render(o)}for(var s in this._group)!function(){var t=e._group[s].items;if(e._group[s].show)for(s in t)!function(){var e=t[s];switch(e.type){case"polygon":e.obj||(e.obj=new c(e,o));e.obj.render(o);break;case"image":if(e.obj){e.obj.render(o)}else e.obj=new h(e,o,!0)}}()}();"function"==typeof t&&t()},writable:!0,configurable:!0},editPolygon:{value:function(t,e,o,i,n,r){var a=this;this.drawLayer(function(){switch(a.type){case"canvas":a.drawCanvasPolygon(e,o,i,n,r)}})},writable:!0,configurable:!0},drawShape:{value:function(t,e){var o=this;this.drawLayer(function(){switch(o.type){case"canvas":o.drawCanvasObj(t,e)}})},writable:!0,configurable:!0},drawCanvasObj:{value:function(t,e){var o=this,i=this.layerObj,n=i.getContext("2d");switch(e.type){case"image":o.imageUrl!=e.url?function(){o.image=null;var i=new Image;i.onload=function(){console.log("image onload"),n.drawImage(i,t.x,t.y,e.width||25,e.height||25)},i.onerror=function(t){console.log("e")},i.src=e.url,o.image=i,o.imageUrl=e.url}():n.drawImage(o.image,t.x,t.y,e.width||25,e.height||25)}},writable:!0,configurable:!0},drawCanvasPolygon:{value:function(t,e,o,i,n){var r=this,a=this.layerObj.getContext("2d");r._prevData&&a.putImageData(r._prevData,0,0),a.strokeStyle=e?e.stroke||"#000000":"#000000",a.beginPath();for(var s=0;s<t.length;s++){var c=t[s];switch(s){case 0:a.moveTo(c.x,c.y);break;default:a.lineTo(c.x,c.y)}}if(o){this._editPolygon=null;var h=null;e&&(h=e.fill?l.isHex(e.fill)?l.hexToRgba(e.fill||"#bdbdbd"):e.fill:l.hexToRgba("#bdbdbd")),a.fillStyle=h,a.fill()}if(a.stroke(),a.closePath(),!o)for(var s=0;s<t.length;s++){var c=t[s];r.drawCanvasPolygonHandler(a,c)}i&&(a.save(),"function"==typeof n&&n())},writable:!0,configurable:!0},drawCanvasPolygonHandler:{value:function(t,e){t.beginPath(),t.fillStyle="#000000",t.arc(e.x,e.y,3,0,2*Math.PI,!0),t.fill(),t.stroke(),t.closePath()},writable:!0,configurable:!0},copyCanvasImageData:{value:function(t){var e=this.layerObj,o=e.getContext("2d");this._prevData=o.getImageData(0,0,this.width,this.height),"function"==typeof t&&t()},writable:!0,configurable:!0},getObjPolygonInfo:{value:function(t){for(var e=[],o=[],i=0;i<t.length;i++)e.push(t[i].x),o.push(t[i].y);var n=Math.min.apply(Math,e),r=Math.max.apply(Math,e),a=Math.min.apply(Math,o),s=Math.max.apply(Math,o),l=Math.abs(r-n),c=Math.abs(s-a);return{paths:t,posx:parseInt((n+r)/2,10),posy:parseInt((a+s)/2,10),width:l,height:c,x1:n,y1:a,x2:r,y2:s}},writable:!0,configurable:!0},getLayerPosition:{value:function(t){var e=t.offsetX,o=t.offsetY;return{x:parseInt(e),y:parseInt(o)}},writable:!0,configurable:!0},destroy:{value:function(){var t=this;for(var e in this._group){var o=t._group[e];for(var i in o.items){o.items[i];null}o=null}this.base=null,this.layerObj=null,this.layerObjId=null,this.editShape=null,this.controlBase=null,this._drawPath=null,this._drawStartPos=null,this._editPathArr=[],this._uniqueId=0,this._selectedShape=[],this.imageUrl=null,this.image=null,this._linkInfo=[]},writable:!0,configurable:!0}}),t}();e.exports=p},{"./color":2,"./element/canvas/Image":4,"./element/canvas/Link":5,"./element/canvas/polygon":6,"./events":7}],10:[function(t,e,o){"use strict";var i=function(t,e,o){e&&Object.defineProperties(t,e),o&&Object.defineProperties(t.prototype,o)},n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=$('<div class="selector-handler" style="position:absolute;top:0;left:0;width:0;height:0;opacity:0.4;z-index:9999;border:1px solid black;background-color:black;"></div>'),a=0,s=0,l=function(){function t(){n(this,t),this.enable=!1}return i(t,null,{init:{value:function(){this.enable=!1,r.remove(),r=$('<div class="selector-handler" style="position:absolute;top:0;left:0;width:0;height:0;opacity:0.4;z-index:9999;border:1px solid black;background-color:black;"></div>')},writable:!0,configurable:!0},start:{value:function(t,e,o,i){if(this.enable){var n=null,l=null,c=null;n=e.getBoundingClientRect(),l=(o.clientX-n.left)*(e.width/n.width),c=(o.clientY-n.top)*(e.height/n.height),a=l,s=c,r.css({top:a,lefT:s,width:0,height:0,display:"none"}),"function"==typeof i&&i(a,s),t.append(r)}},writable:!0,configurable:!0},draw:{value:function(t,e,o){if(this.enable){var i=null,n=null,l=null;i=t.getBoundingClientRect(),n=(e.clientX-i.left)*(t.width/i.width),l=(e.clientY-i.top)*(t.height/i.height);var c=Math.min(n,a),h=Math.min(l,s),u=Math.abs(n-a),p=Math.abs(l-s);r.css({top:h,left:c,width:u,height:p,display:"block"}),"function"==typeof o&&o(h,c,u,p)}},writable:!0,configurable:!0},end:{value:function(t,e,o){if(this.enable){var i=null,n=null,l=null,c=null,h=null;i=t.getBoundingClientRect(),n=(e.clientX-i.left)*(t.width/i.width),l=(e.clientY-i.top)*(t.height/i.height),c=Math.min(n,a),h=Math.min(l,s),a=0,s=0;var u=r[0].style,p=parseInt(u.width),d=parseInt(u.height);r.remove(),"function"==typeof o&&o(c,h,p,d)}},writable:!0,configurable:!0}}),t}();e.exports=l},{}]},{},[8]);